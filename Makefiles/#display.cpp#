#include "display.h"


GraphicsContext *VirtualScreen;
GraphicsContext *PhysicalScreen;

unsigned int VideoBuffer[307200];
unsigned char *pVbuffer;

static unsigned char font3[] =
  {
    0,0,0,0,0,0,0,0, //0 to 8                                                
    0,0,0,0,0,0,0,0, //8 to 16                                                 
    0,0,0,0,0,0,0,0, //16 to 24                                              
    0,0,0,0,0,0,0,0, //24 to 32                                             
    63,252,63,252,192,3,192,3, //32 to 40                                    
    204,51,204,51,192,3,192,3, //40 to 48                                   
    207,243,207,243,192,3,192,3, //48 to 56                                    
    63,252,63,252,0,0,0,0, //56 to 64                                         
    63,252,63,252,255,255,255,255, //64 to 72                              
    243,207,243,207,255,255,255,255, //72 to 80                           
    240,15,240,15,255,255,255,255, //80 to 88                               
    63,252,63,252,0,0,0,0, //88 to 96                                       
    15,60,15,60,63,255,63,255, //96 to 104     
    63,255,63,255,63,255,63,255, //104 to 112 
    15,252,15,252,3,240,3,240, //112 to 120                         
    0,192,0,192,0,0,0,0, //120 to 128                               
    0,192,0,192,3,240,3,240, //128 to 136                           
    15,252,15,252,63,255,63,255, //136 to 144                       
    15,252,15,252,3,240,3,240, //144 to 152                         
    0,192,0,192,0,0,0,0, //152 to 160                               
    3,240,3,240,3,240,3,240, //160 to 168                           
    0,192,0,192,60,207,60,207, //168 to 176                         
    63,255,63,255,60,207,60,207, //176 to 184                       
    0,192,0,192,3,240,3,240, //184 to 192                           
    0,192,0,192,3,240,3,240, //192 to 200                           
    15,252,15,252,63,255,63,255, //200 to 208                       
    15,252,15,252,0,192,0,192, //208 to 216                         
    3,240,3,240,15,252,15,252, //216 to 224                         
    0,0,0,0,0,0,0,0, //224 to 232                                   
    3,192,3,192,15,240,15,240, //232 to 240                      
    15,240,15,240,3,192,3,192, //240 to 248                         
    0,0,0,0,0,0,0,0, //248 to 256                                   
    255,255,255,255,255,255,255,255, //256 to 264                   
    252,63,252,63,240,15,240,15, //264 to 272                       
    240,15,240,15,252,63,252,63, //272 to 280                       
    255,255,255,255,255,255,255,255, //280 to 288                   
    0,0,0,0,15,240,15,240, //288 to 296                             
    60,60,60,60,48,12,48,12, //296 to 304                           
    48,12,48,12,60,60,60,60, //304 to 312                           
    15,240,15,240,0,0,0,0, //312 to 320                             
    255,255,255,255,240,15,240,15, //320 to 328                     
    195,195,195,195,207,243,207,243, //328 to 336                   
    207,243,207,243,195,195,195,195, //336 to 344                   
    240,15,240,15,255,255,255,255, //344 to 352                     
    0,255,0,255,0,63,0,63, //352 to 360                             
    0,243,0,243,15,240,15,240, //360 to 368          
    60,60,60,60,60,60,60,60, //368 to 376                           
    60,60,60,60,15,240,15,240, //376 to 384                         
    15,240,15,240,60,60,60,60, //384 to 392                         
    60,60,60,60,60,60,60,60, //392 to 400                           
    15,240,15,240,3,192,3,192, //400 to 408                         
    63,252,63,252,3,192,3,192, //408 to 416                         
    15,0,15,0,15,192,15,192, //416 to 424                           
    15,240,15,240,15,60,15,60, //424 to 432                         
    15,48,15,48,63,0,63,0, //432 to 440                             
    255,0,255,0,252,0,252,0, //440 to 448                           
    63,255,63,255,60,15,60,15, //448 to 456                         
    63,255,63,255,60,15,60,15, //456 to 464                         
    60,15,60,15,60,63,60,63, //464 to 472                           
    252,60,252,60,240,0,240,0, //472 to 480                         
    3,192,3,192,243,207,243,207, //480 to 488                       
    63,252,63,252,60,60,60,60, //488 to 496              
    60,60,60,60,63,252,63,252, //496 to 504                         
    243,207,243,207,3,192,3,192, //504 to 512                       
    48,0,48,0,63,0,63,0, //512 to 520                               
    63,240,63,240,63,255,63,255, //520 to 528                       
    63,240,63,240,63,0,63,0, //528 to 536                           
    48,0,48,0,0,0,0,0, //536 to 544                                 
    0,3,0,3,0,63,0,63, //544 to 552                                 
    3,255,3,255,63,255,63,255, //552 to 560                         
    3,255,3,255,0,63,0,63, //560 to 568                             
    0,3,0,3,0,0,0,0, //568 to 576                                   
    3,192,3,192,15,240,15,240, //576 to 584                         
    63,252,63,252,3,192,3,192, //584 to 592                         
    3,192,3,192,63,252,63,252, //592 to 600                         
    15,240,15,240,3,192,3,192, //600 to 608                         
    60,60,60,60,60,60,60,60, //608 to 616                           
    60,60,60,60,60,60,60,60, //616 to 624        
    60,60,60,60,0,0,0,0, //624 to 632                               
    60,60,60,60,0,0,0,0, //632 to 640                               
    15,255,15,255,63,204,63,204, //640 to 648                       
    63,204,63,204,15,204,15,204, //648 to 656                       
    0,204,0,204,0,204,0,204, //656 to 664                           
    0,204,0,204,0,0,0,0, //664 to 672                               
    3,252,3,252,15,15,15,15, //672 to 680                           
    3,240,3,240,15,60,15,60, //680 to 688                           
    15,60,15,60,3,240,3,240, //688 to 696                           
    60,60,60,60,15,240,15,240, //696 to 704                         
    0,0,0,0,0,0,0,0, //704 to 712                                   
    0,0,0,0,0,0,0,0, //712 to 720                                   
    63,252,63,252,63,252,63,252, //720 to 728                       
    63,252,63,252,0,0,0,0, //728 to 736                             
    3,192,3,192,15,240,15,240, //736 to 744                         
    63,252,63,252,3,192,3,192, //744 to 752                         
    63,252,63,252,15,240,15,240, //752 to 760                       
    3,192,3,192,63,252,63,252, //760 to 768                         
    3,192,3,192,15,240,15,240, //768 to 776                         
    63,252,63,252,3,192,3,192, //776 to 784                         
    3,192,3,192,3,192,3,192, //784 to 792                           
    3,192,3,192,0,0,0,0, //792 to 800                               
    3,192,3,192,3,192,3,192, //800 to 808                           
    3,192,3,192,3,192,3,192, //808 to 816                           
    63,252,63,252,15,240,15,240, //816 to 824                       
    3,192,3,192,0,0,0,0, //824 to 832                               
    0,0,0,0,0,240,0,240, //832 to 840                               
    0,252,0,252,63,255,63,255, //840 to 848                         
    0,252,0,252,0,240,0,240, //848 to 856                           
    0,0,0,0,0,0,0,0, //856 to 864                                   
    0,0,0,0,3,192,3,192, //864 to 872                               
    15,192,15,192,63,255,63,255, //872 to 880                       
    15,192,15,192,3,192,3,192, //880 to 888                         
    0,0,0,0,0,0,0,0, //888 to 896                                   
    0,0,0,0,0,0,0,0, //896 to 904                                   
    60,0,60,0,60,0,60,0, //904 to 912                               
    60,0,60,0,63,255,63,255, //912 to 920                           
    0,0,0,0,0,0,0,0, //920 to 928                                   
    0,0,0,0,12,48,12,48, //928 to 936                               
    60,60,60,60,255,255,255,255, //936 to 944               
    60,60,60,60,12,48,12,48, //944 to 952                           
    0,0,0,0,0,0,0,0, //952 to 960                                   
    0,0,0,0,3,192,3,192, //960 to 968                               
    15,240,15,240,63,252,63,252, //968 to 976                       
    255,255,255,255,255,255,255,255, //976 to 984                   
    0,0,0,0,0,0,0,0, //984 to 992                                   
    0,0,0,0,255,255,255,255, //992 to 1000                          
    255,255,255,255,63,252,63,252, //1000 to 1008                   
    15,240,15,240,3,192,3,192, //1008 to 1016                       
    0,0,0,0,0,0,0,0, //1016 to 1024                                 
    0,0,0,0,0,0,0,0, //1024 to 1032                                 
    0,0,0,0,0,0,0,0, //1032 to 1040                                 
    0,0,0,0,0,0,0,0, //1040 to 1048                                 
    0,0,0,0,0,0,0,0, //1048 to 1056                                 
    3,192,3,192,3,192,3,192, //1056 to 1064                         
    3,192,3,192,3,192,3,192, //1064 to 1072                         
    3,192,3,192,0,0,0,0, //1072 to 1080                             
    3,192,3,192,0,0,0,0, //1080 to 1088                             
    60,60,60,60,60,60,60,60, //1088 to 1096                         
    60,60,60,60,0,0,0,0, //1096 to 1104                             
    0,0,0,0,0,0,0,0, //1104 to 1112                                 
    0,0,0,0,0,0,0,0, //1112 to 1120                                 
    60,240,60,240,60,240,60,240, //1120 to 1128                     
    255,252,255,252,60,240,60,240, //1128 to 1136                   
    255,252,255,252,60,240,60,240, //1136 to 1144                   
    60,240,60,240,0,0,0,0, //1144 to 1152                           
    3,0,3,0,63,240,63,240, //1152 to 1160                           
    243,0,243,0,63,240,63,240, //1160 to 1168                       
    3,60,3,60,63,240,63,240, //1168 to 1176           





void StartDisplay(){
  vga_init();
  vga_setmode(34);
  gl_setcontextvga(34);

  PhysicalScreen = gl_allocatecontext();
  gl_getcontext(PhysicalScreen);

  gl_setcontextvgavirtual(34);
  VirtualScreen = gl_allocatecontext();
  
  gl_getContext(VirtualScreen);
  gl_getContext(VirtualScreen);

  gl_setfont(16,16,font3);
  gl_setwritemode(FONT_COMPRESSED + WRITEMODE_MASKED);
  
  gl_copyscreen(PhysicalScreen);

  pVBuffer = (unsigned char *)VideoBuffer;

};

void RestoreDispaly(){
  vga_init();
  vga_setmode(34);
};

void ClearScreen(){
  gl_clearscreen(0);
};


